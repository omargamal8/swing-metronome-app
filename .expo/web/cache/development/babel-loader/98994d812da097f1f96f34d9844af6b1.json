{"ast":null,"code":"import _get from \"@babel/runtime/helpers/get\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\n\nvar BeatTracker = function () {\n  function BeatTracker(ts_a, ts_b) {\n    var beat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var bar = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, BeatTracker);\n\n    this.ts_a = ts_a;\n    this.ts_b = ts_b;\n    this.beat = beat;\n    this.bar = bar;\n  }\n\n  _createClass(BeatTracker, [{\n    key: \"getNextTickInterval\",\n    value: function getNextTickInterval() {}\n  }, {\n    key: \"incrementTickCounter\",\n    value: function incrementTickCounter() {}\n  }, {\n    key: \"clearCounters\",\n    value: function clearCounters() {\n      this.beat = 0;\n      this.bar = 1;\n    }\n  }]);\n\n  return BeatTracker;\n}();\n\nexport var QuarterNote = function (_BeatTracker) {\n  _inherits(QuarterNote, _BeatTracker);\n\n  var _super = _createSuper(QuarterNote);\n\n  function QuarterNote(ts_a, ts_b) {\n    var beat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var bar = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, QuarterNote);\n\n    return _super.call(this, ts_a, ts_b);\n  }\n\n  _createClass(QuarterNote, [{\n    key: \"getNextTickInterval\",\n    value: function getNextTickInterval() {\n      return 1;\n    }\n  }, {\n    key: \"incrementTickCounter\",\n    value: function incrementTickCounter() {\n      this.beat += 1;\n\n      if (this.beat === this.ts_a + 1) {\n        this.beat = 1;\n        this.bar += 1;\n      }\n    }\n  }]);\n\n  return QuarterNote;\n}(BeatTracker);\nexport var EighthNote = function (_QuarterNote) {\n  _inherits(EighthNote, _QuarterNote);\n\n  var _super2 = _createSuper(EighthNote);\n\n  function EighthNote(ts_a, ts_b) {\n    var _this;\n\n    var beat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var bar = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, EighthNote);\n\n    _this = _super2.call(this, ts_a, ts_b);\n    _this.and = 0;\n    return _this;\n  }\n\n  _createClass(EighthNote, [{\n    key: \"getNextTickInterval\",\n    value: function getNextTickInterval() {\n      return _get(_getPrototypeOf(EighthNote.prototype), \"getNextTickInterval\", this).call(this) / 2;\n    }\n  }, {\n    key: \"incrementTickCounter\",\n    value: function incrementTickCounter() {\n      if (this.and) {\n        this.and = 0;\n\n        _get(_getPrototypeOf(EighthNote.prototype), \"incrementTickCounter\", this).call(this);\n      } else {\n        this.and = 1;\n      }\n    }\n  }, {\n    key: \"clearCounters\",\n    value: function clearCounters() {\n      _get(_getPrototypeOf(EighthNote.prototype), \"clearCounters\", this).call(this);\n\n      this.and = 0;\n    }\n  }]);\n\n  return EighthNote;\n}(QuarterNote);\nexport var SixteenthNote = function (_EighthNote) {\n  _inherits(SixteenthNote, _EighthNote);\n\n  var _super3 = _createSuper(SixteenthNote);\n\n  function SixteenthNote(ts_a, ts_b) {\n    var _this2;\n\n    var beat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var bar = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, SixteenthNote);\n\n    _this2 = _super3.call(this, ts_a, ts_b);\n    _this2.e = 0;\n    _this2.da = 0;\n    return _this2;\n  }\n\n  _createClass(SixteenthNote, [{\n    key: \"getNextTickInterval\",\n    value: function getNextTickInterval() {\n      return _get(_getPrototypeOf(SixteenthNote.prototype), \"getNextTickInterval\", this).call(this) / 2;\n    }\n  }, {\n    key: \"incrementTickCounter\",\n    value: function incrementTickCounter() {\n      console.log({\n        BAR: this.bar,\n        BEAT: this.beat,\n        e: this.e,\n        and: this.and,\n        da: this.da\n      });\n\n      if (this.e === 0) {\n        this.e = 1;\n        return;\n      }\n\n      if (this.and === 0) {\n        _get(_getPrototypeOf(SixteenthNote.prototype), \"incrementTickCounter\", this).call(this);\n\n        return;\n      }\n\n      if (this.da === 0) {\n        this.da = 1;\n        return;\n      }\n\n      this.e = 0;\n      this.da = 0;\n\n      _get(_getPrototypeOf(SixteenthNote.prototype), \"incrementTickCounter\", this).call(this);\n    }\n  }, {\n    key: \"clearCounters\",\n    value: function clearCounters() {\n      _get(_getPrototypeOf(SixteenthNote.prototype), \"clearCounters\", this).call(this);\n\n      this.e = 0;\n      this.da = 0;\n    }\n  }]);\n\n  return SixteenthNote;\n}(EighthNote);","map":{"version":3,"sources":["/home/omar/swing-metronome-app/beat-tracker.js"],"names":["React","Component","BeatTracker","ts_a","ts_b","beat","bar","QuarterNote","EighthNote","and","SixteenthNote","e","da","console","log","BAR","BEAT"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { StyleSheet, Text, View, Button } from 'react-native';\n\nclass BeatTracker {\n    constructor(ts_a, ts_b, beat=0, bar=1){\n        this.ts_a = ts_a\n        this.ts_b = ts_b\n        this.beat = beat\n        this.bar  = bar\n    }\n\n    getNextTickInterval(){}\n\n    incrementTickCounter(){}\n    \n    clearCounters(){\n        this.beat=0\n        this.bar=1\n    }\n\n}\n\nexport class QuarterNote extends BeatTracker{\n    constructor(ts_a, ts_b, beat=0, bar=1){\n        super(ts_a, ts_b)\n    }\n    getNextTickInterval(){\n        return 1\n    }\n    \n    incrementTickCounter(){\n        this.beat += 1\n        if(this.beat === this.ts_a+1){\n            this.beat = 1\n            this.bar += 1\n        }\n    }\n}\n\nexport class EighthNote extends QuarterNote{\n    constructor(ts_a, ts_b, beat=0, bar=1){\n        super(ts_a, ts_b)\n        this.and = 0\n        \n    }\n    \n    getNextTickInterval(){\n        return super.getNextTickInterval() / 2\n    }\n    \n    incrementTickCounter(){\n        if(this.and){\n            this.and = 0\n            super.incrementTickCounter()\n        }\n        else{\n            this.and = 1\n        }\n    }\n\n    clearCounters(){\n        super.clearCounters()\n        this.and = 0\n    }\n\n}\n\nexport class SixteenthNote extends EighthNote{\n    constructor(ts_a, ts_b, beat=0, bar=1){\n        super(ts_a, ts_b)\n        this.e  = 0\n        this.da = 0\n    }\n    \n    getNextTickInterval(){\n        return super.getNextTickInterval() / 2\n    }\n    \n    incrementTickCounter(){\n        console.log({BAR: this.bar, BEAT:this.beat, e:this.e, and:this.and, da:this.da})\n        if(this.e === 0){\n            this.e = 1\n            return\n        }\n\n        if(this.and === 0){\n            super.incrementTickCounter()\n            return\n        }\n\n        if(this.da === 0){\n            this.da = 1\n            return\n        }\n\n        this.e = 0\n        this.da  = 0\n        super.incrementTickCounter()\n    }\n\n    clearCounters(){\n        super.clearCounters()\n        this.e = 0\n        this.da = 0\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}